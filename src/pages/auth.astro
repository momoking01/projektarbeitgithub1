---
import Layout from "../components/layout.astro";
---

<Layout>
  <div class="auth-container">
    <h1>Login</h1>
    <label for="role">Choose your role:</label>
    <select id="role">
      <option value="client">Client</option>
      <option value="admin">Admin</option>
    </select>
    <button id="loginButton">Login</button>
  </div>
</Layout>

<script is:inline>
  function setUserRole() {
      let role = document.getElementById("role").value;
      localStorage.setItem("userRole", role);
      alert(`Logged in as ${role}`);

      if (role === "admin") {
          window.location.pathname = "/projektarbeitgithub1/admin"; // Admin geht zum Admin-Panel
      } else {
          window.location.pathname = "/projektarbeitgithub1/"; // Andere Nutzer gehen zur Startseite
      }
  }

  function checkUserRole() {
    let role = localStorage.getItem("userRole");
    if (role) {
      alert(`You are logged in as ${role}`);
    }
  }

  window.onload = checkUserRole;

  // Button-EventListener hinzuf√ºgen (empfohlene Methode)
  document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("loginButton").addEventListener("click", setUserRole);
  });
</script>

<style>
  .auth-container {
    text-align: center;
    padding: 20px;
  }

  .auth-container select, .auth-container button {
    margin: 10px;
  }
</style>
